<form #form="ngForm" (ngSubmit)="save()">
  <mat-card>

    <mat-card-title *ngIf="id" style="display: flex">
      <span>Edit</span>
      <span style="flex: 1"></span>
      <mat-spinner *ngIf="isLoading" [diameter]="30"></mat-spinner>
    </mat-card-title>
    <mat-card-title *ngIf="!id">
      Add a new file
    </mat-card-title>

    <mat-card-content>
      <mat-form-field>
        <span matPrefix class="gray">.qmail-</span>
        <input matInput #name name="id" placeholder="Name" pattern="[^\.^\s^\\^/^\?^%^\*^:^|^<^>]+"
               [(ngModel)]="file.id" [disabled]="id" required>
        <mat-error *ngIf="name.validity && name.value">Name includes prohibited characters.</mat-error>
      </mat-form-field>

      <mat-form-field>
        <textarea matInput matTextareaAutosize name="content" placeholder="Content" required
                  [(ngModel)]="file.content"></textarea>
      </mat-form-field>
    </mat-card-content>

    <mat-card-actions style="display: flex" align="right">
      <button mat-icon-button type="button" (click)="deleteFile()" *ngIf="id">
        <mat-icon>delete</mat-icon>
      </button>
      <span style="flex: 1;"></span>
      <button mat-button routerLink="/files" type="button">Cancel</button>
      <button mat-raised-button type="submit" [disabled]="!form.valid">Save</button>
    </mat-card-actions>

  </mat-card>
</form>
